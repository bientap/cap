<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_112) on Tue Jul 31 15:24:02 CEST 2018 -->
<title>DownloadNotificationProvider (castLabs Player SDK - Downloader Plugin)</title>
<meta name="date" content="2018-07-31">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DownloadNotificationProvider (castLabs Player SDK - Downloader Plugin)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/castlabs/sdk/downloader/DownloaderPlugin.StorageLowMode.html" title="annotation in com.castlabs.sdk.downloader"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/castlabs/sdk/downloader/DownloadService.html" title="class in com.castlabs.sdk.downloader"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/castlabs/sdk/downloader/DownloadNotificationProvider.html" target="_top">Frames</a></li>
<li><a href="DownloadNotificationProvider.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.castlabs.sdk.downloader</div>
<h2 title="Class DownloadNotificationProvider" class="title">Class DownloadNotificationProvider</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.castlabs.sdk.downloader.DownloadNotificationProvider</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">DownloadNotificationProvider</span>
extends java.lang.Object</pre>
<div class="block">Class to provide the <a href="../../../../com/castlabs/sdk/downloader/DownloaderPlugin.html" title="class in com.castlabs.sdk.downloader"><code>DownloaderPlugin</code></a> with the required info related to notifications
 for the foreground Downloader service.

 Starting in Android O, background execution limits have been imposed. Standard <code>Service</code>s
 may not be run in background anymore. This can be overcome using a Foreground Service instead.

 In order for a Service to become a Foreground Service, a persistent <code>Notification</code> must be
 shown for as long as such Service is a Foreground Service.

 For the sake of consistency, the <a href="../../../../com/castlabs/sdk/downloader/DownloaderPlugin.html" title="class in com.castlabs.sdk.downloader"><code>DownloaderPlugin</code></a> will always run its service in foreground
 mode, regardless of the Android API version.

 The only abstract method in this class is <a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#getNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Context-"><code>getNotification(DownloadServiceBinder, Context)</code></a>.
 This method must be overridden and return the Notification to show while a Download is ongoing. The most
 common use case for this notification is to show the download progress of the Downloads.

 There are also two additional methods that can be overridden for further customisation:
 <ul>
     <li>
         <a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#onDownloadEvent-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Intent-"><code>onDownloadEvent(DownloadServiceBinder, Intent)</code></a>: This method will be called whenever
         the <a href="../../../../com/castlabs/sdk/downloader/DownloadService.html" title="class in com.castlabs.sdk.downloader"><code>DownloadService</code></a> fires a new event. The provided Intent will one of the actions
         defined in <a href="../../../../com/castlabs/sdk/downloader/MessageHandler.html" title="class in com.castlabs.sdk.downloader"><code>MessageHandler</code></a>. The default implementation for this method returns <code>true</code>.
     </li>
     <li>
         <a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#shouldKeepNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-"><code>shouldKeepNotification(DownloadServiceBinder)</code></a>: once there are no more ongoing
         downloads, and the Service is (automatically) demoted to background, this method will be
         invoked to decide whether to automatically clean the persistent Notification or not.
         The default implementation returns <code>true</code>.
     </li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.1.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#DownloadNotificationProvider-int-">DownloadNotificationProvider</a></span>(int&nbsp;notificationId)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract android.app.Notification</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#getNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Context-">getNotification</a></span>(<a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder,
               android.content.Context&nbsp;context)</code>
<div class="block">Build and provide a notification.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#getNotificationId--">getNotificationId</a></span>()</code>
<div class="block">Returns the notification id provided in the constructor.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#onDownloadEvent-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Intent-">onDownloadEvent</a></span>(<a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder,
               android.content.Intent&nbsp;intent)</code>
<div class="block">Called whenever a new Download event is fired.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#shouldKeepNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-">shouldKeepNotification</a></span>(<a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder)</code>
<div class="block">Whether the persistent notification should be cleared or not.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DownloadNotificationProvider-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DownloadNotificationProvider</h4>
<pre>public&nbsp;DownloadNotificationProvider(int&nbsp;notificationId)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notificationId</code> - Notification id to bind to the persistent notification. Must be greater
                       than 0.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getNotificationId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotificationId</h4>
<pre>public final&nbsp;int&nbsp;getNotificationId()</pre>
<div class="block">Returns the notification id provided in the constructor.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the notification id</dd>
</dl>
</li>
</ul>
<a name="getNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Context-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotification</h4>
<pre>@NonNull
public abstract&nbsp;android.app.Notification&nbsp;getNotification(@NonNull
                                                                  <a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder,
                                                                  @NonNull
                                                                  android.content.Context&nbsp;context)</pre>
<div class="block">Build and provide a notification. This notification will be tied to the <a href="../../../../com/castlabs/sdk/downloader/DownloadService.html" title="class in com.castlabs.sdk.downloader"><code>DownloadService</code></a>
 whenever it is in foreground mode, aka. when there's at least one active Download.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>downloadServiceBinder</code> - binder instance to get Download-related info</dd>
<dd><code>context</code> - the application context.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Notification to show</dd>
</dl>
</li>
</ul>
<a name="onDownloadEvent-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Intent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDownloadEvent</h4>
<pre>public&nbsp;boolean&nbsp;onDownloadEvent(@NonNull
                               <a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder,
                               @NonNull
                               android.content.Intent&nbsp;intent)</pre>
<div class="block">Called whenever a new Download event is fired. The event Intent is forwarded to this method.
 The Intent actions will be one from the <a href="../../../../com/castlabs/sdk/downloader/MessageHandler.html" title="class in com.castlabs.sdk.downloader"><code>MessageHandler</code></a>.
 <p>
 You must return <code>true</code> *only* if you want the notification to be updated/posted. To avoid posting
 a notification for some download events, just return <code>false</code> in those cases. For example,
 to avoid showing a notification when a Download is deleted:
 <pre>
 <code>
 	public boolean onDownloadEvent(@NonNull DownloadServiceBinder downloadServiceBinder, @NonNull Intent intent) {
 		String action = intent.getAction();
 		switch (action) {
 			case MessageHandler.ACTION_DOWNLOAD_DELETED:
 				return false;
 			default:
 				return super.onDownloadEvent(downloadServiceBinder, intent);
 		}
 	}
 </code>
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>downloadServiceBinder</code> - binder instance to get Download-related info</dd>
<dd><code>intent</code> - Intent having the Download event info</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the notification should be updated. In that case, <a href="../../../../com/castlabs/sdk/downloader/DownloadNotificationProvider.html#getNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-android.content.Context-"><code>getNotification(DownloadServiceBinder, Context)</code></a>
 will be called right after. Default implementation returns <code>true</code>.</dd>
</dl>
</li>
</ul>
<a name="shouldKeepNotification-com.castlabs.sdk.downloader.DownloadServiceBinder-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shouldKeepNotification</h4>
<pre>public&nbsp;boolean&nbsp;shouldKeepNotification(@NonNull
                                      <a href="../../../../com/castlabs/sdk/downloader/DownloadServiceBinder.html" title="class in com.castlabs.sdk.downloader">DownloadServiceBinder</a>&nbsp;downloadServiceBinder)</pre>
<div class="block">Whether the persistent notification should be cleared or not.
 <p>
 This is called whenever the <a href="../../../../com/castlabs/sdk/downloader/DownloadService.html" title="class in com.castlabs.sdk.downloader"><code>DownloadService</code></a> transitions out of foreground mode, and
 thus the notification is no longer enforced. If @{code true} is returned it's the clients
 responsibility to dismiss the notification, or at least build the notification calling
 <code>Notification.Builder.setOngoing(boolean)</code> with <code>false</code> so it can be
 discarded by the user.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>downloadServiceBinder</code> - binder instance to get Download-related info</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether the persistent notification should be cleared or not on service transition
 to background mode. Default implementation returns <code>true</code>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/castlabs/sdk/downloader/DownloaderPlugin.StorageLowMode.html" title="annotation in com.castlabs.sdk.downloader"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/castlabs/sdk/downloader/DownloadService.html" title="class in com.castlabs.sdk.downloader"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/castlabs/sdk/downloader/DownloadNotificationProvider.html" target="_top">Frames</a></li>
<li><a href="DownloadNotificationProvider.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
